# Examples

The `examples/` directory contains imported CloudFormation templates converted to wetwire-aws Go code. These serve as both test cases and reference implementations.

## Directory Structure

```
examples/
├── aws-cloudformation-templates/   # 126 imported AWS sample templates
└── aws-sam-templates/              # 56 imported SAM templates
```

## AWS CloudFormation Templates

Imported from [aws-cloudformation-templates](https://github.com/awslabs/aws-cloudformation-templates).

| Category | Examples |
|----------|----------|
| **EC2** | `amazon_linux`, `centos`, `ec2_1`, `ec2_instance_with_securitygroup_and_role` |
| **VPC** | `vpc_single_instance_in_subnet`, `vpc_with_publicsubnet`, `multi_az_vpc` |
| **S3** | `compliant_bucket`, `compliant_static_website`, `static_website` |
| **Lambda** | `lambda_1`, `lambda_with_dynamodb`, `lambda_zip_from_s3` |
| **API Gateway** | `apigateway_lambda_integration`, `cloudfront_api_gateway` |
| **DynamoDB** | `dynamodb_1`, `dynamodb_with_autoscaling` |
| **ECS** | `ecsclusterinvpc`, `fargate_service` |
| **EKS** | `eks_cluster`, `eks_nodegroup` |
| **RDS** | `rds_aurora_mysql`, `rds_postgres`, `rds_mysql_with_read_replica` |
| **CloudFront** | `cloudfront`, `cloudfront_nocache`, `cloudfront_s3_origin` |
| **Step Functions** | `stepfunction`, `stepfunction_with_lambda` |
| **CloudWatch** | `cloudwatch_dashboard_clientvpn`, `cloudwatch_dashboard_nat_flowlogs` |
| **Auto Scaling** | `autoscalingmultiazwithnotifications`, `autoscalingrollingupdates` |
| **IAM** | `iam_role`, `iam_policy`, `iam_instance_profile` |
| **Cognito** | `cognito`, `cognito_userpool` |
| **Config** | `config`, `config_rules` |

## AWS SAM Templates

Imported from AWS SAM sample repositories.

| Category | Examples |
|----------|----------|
| **Hello World** | `aws_sam_cli_app_templates_*_hello_*` |
| **DynamoDB** | `aws_sam_cli_app_templates_*_ddb_*` |
| **S3** | `aws_sam_cli_app_templates_*_s3_*` |
| **Step Functions** | `aws_sam_cli_app_templates_*_step_func_*` |
| **CRUD** | `sam_python_crud_sample_template_yaml` |
| **Observability** | `sessions_with_aws_sam_api_enhanced_observability_*` |
| **AppConfig** | `sessions_with_aws_sam_appconfig_lambda_extensions_*` |

## Using Examples

Each example directory contains:

```
example_name/
├── go.mod      # Go module file
└── infra.go    # Generated wetwire-aws code
```

### View the generated code

```bash
cat examples/aws-cloudformation-templates/amazon_linux/infra.go
```

### Build a template from an example

```bash
cd examples/aws-cloudformation-templates/amazon_linux
wetwire-aws build .
```

### Use as a starting point

Copy an example to your project and modify:

```bash
cp -r examples/aws-cloudformation-templates/vpc_single_instance_in_subnet ./my-vpc
cd my-vpc
# Edit infra.go
wetwire-aws build .
```

## Regenerating Examples

Examples are generated by the import test scripts:

```bash
# Import AWS CloudFormation samples
./scripts/import_aws_samples.sh

# Import SAM samples
./scripts/import_sam_samples.sh
```

See [Import Workflow](IMPORT_WORKFLOW.md) for details on the import process and exclusion lists.

## Notes

- Examples are auto-generated and may need manual cleanup for production use
- Some examples use explicit `Ref{}` and `GetAtt{}` (flagged by linter) due to import limitations
- Run `wetwire-aws lint --fix ./...` to apply automatic style fixes
