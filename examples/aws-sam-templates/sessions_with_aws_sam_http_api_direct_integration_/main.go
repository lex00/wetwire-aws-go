// Package template contains CloudFormation resources.
// Main resources
//
// Generated by wetwire-aws import.
package template

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/kinesis"
	"github.com/lex00/wetwire-aws-go/resources/serverless"
)

var MyHttpApi = serverless.HttpApi{
	DefinitionBody: Transform{Name: "AWS::Include", Parameters: Json{
	"Location": "./api.yaml",
}},
}

var MyStream = kinesis.Stream{
	ShardCount: 1,
}

var MyTriggeredLambda = serverless.Function{
	CodeUri: "src/",
	Events: Json{
	"EventBridgeTrigger": Json{
	"Properties": Json{
	"Pattern": Json{
	"source": []any{"WebApp"},
},
},
	"Type": "CloudWatchEvent",
},
	"KinesisTrigger": Json{
	"Properties": Json{
	"StartingPosition": "TRIM_HORIZON",
	"Stream": MyStream.Arn,
},
	"Type": "Kinesis",
},
	"SQSTrigger": Json{
	"Properties": Json{
	"Queue": MyQueue.Arn,
},
	"Type": "SQS",
},
},
	Handler: "app.lambdaHandler",
	Policies: []any{Json{
	"SQSPollerPolicy": Json{
	"QueueName": MyQueue.QueueName,
},
}},
	Runtime: "nodejs16.x",
}
