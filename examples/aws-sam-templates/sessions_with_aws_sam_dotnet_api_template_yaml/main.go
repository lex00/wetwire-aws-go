// Package template contains CloudFormation resources.
// Main resources
//
// Generated by wetwire-aws import.
package template

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/serverless"
)

var HttpApi = serverless.HttpApi{
	DefinitionBody: Json{
	"info": Json{
	"title": Sub{String: "${AWS::StackName}-HttpApi"},
	"version": "1.0",
},
	"openapi": "3.0",
	"paths": Json{
	"/users/{id}": Json{
	"post": Json{
	"responses": Json{},
},
},
},
},
	FailOnWarnings: true,
}

var SaveUserEnvironment = serverless.Function_Environment{
	Variables: Json{"TABLE_ARN": Users.Arn, "TABLE_NAME": Users},
}

var SaveUser = serverless.Function{
	CodeUri: "src/SaveUser",
	Description: SubWithMap{String: "Stack ${StackTagName} Environment ${EnvironmentTagName} Function ${ResourceName}", Variables: Json{
	"ResourceName": "SaveUser",
}},
	Environment: SaveUserEnvironment,
	Events: Json{
	"HttpApiPOSTusersid": Json{
	"Properties": Json{
	"ApiId": HttpApi,
	"Method": "POST",
	"Path": "/users/{id}",
	"PayloadFormatVersion": "2.0",
	"TimeoutInMillis": 29000,
},
	"Type": "HttpApi",
},
},
	FunctionName: Sub{String: "${AWS::StackName}-SaveUser"},
	Handler: "Function::Function.Function::FunctionHandler",
	MemorySize: 3008,
	Policies: []any{"AWSXrayWriteOnlyAccess", Json{
	"DynamoDBCrudPolicy": Json{
	"TableName": Users,
},
}},
	Runtime: "dotnetcore3.1",
	Timeout: 30,
	Tracing: "Active",
}
