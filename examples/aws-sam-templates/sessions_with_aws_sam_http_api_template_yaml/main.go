// Package template contains CloudFormation resources.
// Main resources
//
// Generated by wetwire-aws import.
package template

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/serverless"
)

var CatchAllLambdaFunction = serverless.Function{
	CodeUri: "src/",
	Events: Json{
	"RootGet": Json{
	"Type": "HttpApi",
},
},
}

var HttpApiCorsConfiguration = serverless.HttpApi_CorsConfiguration{
	AllowMethods: []any{"GET"},
	AllowOrigins: []any{"http://localhost:8080"},
}

var HttpApi = serverless.HttpApi{
	Auth: Json{
	"Authorizers": Json{
	"GeneralAuth": Json{
	"AuthorizationScopes": []any{"email"},
	"IdentitySource": "$request.header.Authorization",
	"JwtConfiguration": Json{
	"audience": []any{Audience},
	"issuer": Sub{String: "https://cognito-idp.${AWS::Region}.amazonaws.com/${UserPoolId}"},
},
},
},
},
	CorsConfiguration: HttpApiCorsConfiguration,
}

var AdminLambdaFunction = serverless.Function{
	CodeUri: "src/",
	Events: Json{
	"DosGet": Json{
	"Properties": Json{
	"ApiId": HttpApi,
	"Auth": Json{
	"AuthorizationScopes": []any{Sub{String: "Admins-${Audience}"}},
	"Authorizer": "GeneralAuth",
},
	"Method": "get",
	"Path": "/admin",
},
	"Type": "HttpApi",
},
},
}

var BothLambdaFunction = serverless.Function{
	CodeUri: "src/",
	Events: Json{
	"DosGet": Json{
	"Properties": Json{
	"ApiId": HttpApi,
	"Auth": Json{
	"AuthorizationScopes": []any{Sub{String: "Admins-${Audience}"}, Sub{String: "SU-${Audience}"}},
	"Authorizer": "GeneralAuth",
},
	"Method": "get",
	"Path": "/both",
},
	"Type": "HttpApi",
},
},
}

var LambdaFunction = serverless.Function{
	CodeUri: "src/",
	Events: Json{
	"RootGet": Json{
	"Properties": Json{
	"ApiId": HttpApi,
	"Method": "get",
	"Path": "/",
},
	"Type": "HttpApi",
},
},
}

var SULambdaFunction = serverless.Function{
	CodeUri: "src/",
	Events: Json{
	"DosGet": Json{
	"Properties": Json{
	"ApiId": HttpApi,
	"Auth": Json{
	"AuthorizationScopes": []any{Sub{String: "SU-${Audience}"}},
	"Authorizer": "GeneralAuth",
},
	"Method": "get",
	"Path": "/su",
},
	"Type": "HttpApi",
},
},
}

var SimpleAuthLambdaFunction = serverless.Function{
	CodeUri: "src/",
	Events: Json{
	"RootGet": Json{
	"Properties": Json{
	"ApiId": HttpApi,
	"Auth": Json{
	"Authorizer": "GeneralAuth",
},
	"Method": "get",
	"Path": "/simple",
},
	"Type": "HttpApi",
},
},
}
