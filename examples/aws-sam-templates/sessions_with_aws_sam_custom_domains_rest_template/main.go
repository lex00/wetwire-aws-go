// Package template contains CloudFormation resources.
// Main resources
//
// Generated by wetwire-aws import.
package template

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/certificatemanager"
	"github.com/lex00/wetwire-aws-go/resources/serverless"
)

var GeneratedCert = certificatemanager.Certificate{
	DomainName: DomainName,
	ValidationMethod: "DNS",
}

var RestApiGateway = serverless.Api{
	Domain: Json{
	"CertificateArn": If{"CreateCert", GeneratedCert, CertArn},
	"DomainName": DomainName,
	"Route53": Json{
	"HostedZoneId": If{"CreateZone", GeneratedZone, ZoneId},
},
},
	StageName: "Prod",
}

var RestApiFunction = serverless.Function{
	Events: Json{
	"FetchRest": Json{
	"Properties": Json{
	"Method": "GET",
	"Path": "/",
	"RestApiId": RestApiGateway,
},
	"Type": "Api",
},
},
	Handler: "index.handler",
	InlineCode: `exports.handler = async (event) => {
  const response = {
    statusCode: 200,
    body: JSON.stringify('Hello from Lambda!'),
  };
  return response;
};
`,
	Runtime: "nodejs16.x",
}
