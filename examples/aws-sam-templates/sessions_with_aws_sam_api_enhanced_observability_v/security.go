// Package template contains CloudFormation resources.
// Security resources: IAM, Cognito, KMS, etc.
//
// Generated by wetwire-aws import.
package template

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/wafv2"
)

var MyWAFACLRuleRateLimitStatementRateBasedStatement = wafv2.RuleGroup_RateBasedStatement{
	AggregateKeyType: "IP",
	Limit: 100,
}

var MyWAFACLRuleRateLimitActionBlock = wafv2.RuleGroup_BlockAction{
}

var MyWAFACLRuleRateLimitVisibilityConfig = wafv2.RuleGroup_VisibilityConfig{
	CloudWatchMetricsEnabled: true,
	MetricName: "RateLimiter",
	SampledRequestsEnabled: true,
}

var MyWAFACLRuleRateLimitStatement = wafv2.RuleGroup_Statement{
	RateBasedStatement: &MyWAFACLRuleRateLimitStatementRateBasedStatement,
}

var MyWAFACLRuleRateLimitAction = wafv2.RuleGroup_RuleAction{
	Block: &MyWAFACLRuleRateLimitActionBlock,
}

var MyWAFACLDefaultActionAllow = wafv2.RuleGroup_AllowAction{
}

var MyWAFACLVisibilityConfig = wafv2.WebACL_VisibilityConfig{
	CloudWatchMetricsEnabled: true,
	MetricName: "AppRules",
	SampledRequestsEnabled: true,
}

var MyWAFACLRuleRateLimit = wafv2.WebACL_Rule{
	Action: &MyWAFACLRuleRateLimitAction,
	Name: "RateLimit",
	Priority: 0,
	Statement: MyWAFACLRuleRateLimitStatement,
	VisibilityConfig: MyWAFACLRuleRateLimitVisibilityConfig,
}

var MyWAFACLDefaultAction = wafv2.WebACL_DefaultAction{
	Allow: &MyWAFACLDefaultActionAllow,
}

var MyWAFACL = wafv2.WebACL{
	DefaultAction: MyWAFACLDefaultAction,
	Description: "Application WAF",
	Rules: []any{MyWAFACLRuleRateLimit},
	Scope: "REGIONAL",
	VisibilityConfig: MyWAFACLVisibilityConfig,
}

var MyWAFAssociation = wafv2.WebACLAssociation{
	ResourceArn: SubWithMap{String: "arn:aws:apigateway:${AWS::Region}::/restapis/${ApiId}/stages/${ApiStage}", Variables: Json{
	"ApiId": MyApi,
	"ApiStage": MyApiProdStage,
}},
	WebACLArn: MyWAFACL.Arn,
}
