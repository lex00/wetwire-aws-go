// Package template contains CloudFormation resources.
// Security resources: IAM, Cognito, KMS, etc.
//
// Generated by wetwire-aws import.
package template

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/cognito"
)

var UserPoolPoliciesPasswordPolicy = cognito.UserPool_PasswordPolicy{
	MinimumLength: 8,
}

var UserPoolSchemaEmail = cognito.UserPool_SchemaAttribute{
	AttributeDataType: "String",
	Name: "email",
	Required: false,
}

var UserPoolPolicies = cognito.UserPool_Policies{
	PasswordPolicy: &UserPoolPoliciesPasswordPolicy,
}

var UserPool = cognito.UserPool{
	AutoVerifiedAttributes: []any{"email"},
	Policies: &UserPoolPolicies,
	Schema: []any{UserPoolSchemaEmail},
	UserPoolName: Sub{String: "${AppName}-UserPool"},
	UsernameAttributes: []any{"email"},
}

var AdminUserUserAttributeEmail = cognito.UserPoolUser_AttributeType{
	Name: "email",
	Value: AdminEmail,
}

var AdminUser = cognito.UserPoolUser{
	DesiredDeliveryMediums: []any{"EMAIL"},
	ForceAliasCreation: true,
	UserAttributes: []any{AdminUserUserAttributeEmail},
	UserPoolId: UserPool,
	Username: AdminEmail,
}

var AdminUserGroup = cognito.UserPoolGroup{
	Description: "Admin user group",
	GroupName: "Admins",
	Precedence: 0,
	UserPoolId: UserPool,
}

var AddUserToGroup = cognito.UserPoolUserToGroupAttachment{
	GroupName: AdminUserGroup,
	UserPoolId: UserPool,
	Username: AdminUser,
}

var UserPoolClient = cognito.UserPoolClient{
	AllowedOAuthFlows: []any{"code", "implicit"},
	AllowedOAuthFlowsUserPoolClient: true,
	AllowedOAuthScopes: []any{"email", "openid", "profile"},
	CallbackURLs: ClientDomains,
	ClientName: Sub{String: "${AppName}-UserPoolClient"},
	GenerateSecret: false,
	LogoutURLs: ClientDomains,
	SupportedIdentityProviders: []any{"COGNITO"},
	UserPoolId: UserPool,
}

var UserPoolDomain = cognito.UserPoolDomain{
	Domain: Sub{String: "${AppName}-${AWS::AccountId}"},
	UserPoolId: UserPool,
}
