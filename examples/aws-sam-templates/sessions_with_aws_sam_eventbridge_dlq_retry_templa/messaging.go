// Package template contains CloudFormation resources.
// Messaging resources: SNS, SQS, EventBridge, etc.
//
// Generated by wetwire-aws import.
package template

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/events"
	"github.com/lex00/wetwire-aws-go/resources/sqs"
)

var DLQueue = sqs.Queue{
}

var EBRuleTargetLambdaTargetRetryPolicy = events.Rule_RetryPolicy{
	MaximumEventAgeInSeconds: 60,
	MaximumRetryAttempts: 4,
}

var EBRuleTargetLambdaTargetDeadLetterConfig = events.EventBus_DeadLetterConfig{
	Arn: DLQueue.Arn,
}

var EBRuleTargetLambdaTarget = events.Rule_Target{
	Arn: TriggeredFunction.Arn,
	DeadLetterConfig: &EBRuleTargetLambdaTargetDeadLetterConfig,
	Id: "lambdaTarget",
	RetryPolicy: &EBRuleTargetLambdaTargetRetryPolicy,
}

var EBRule = events.Rule{
	EventPattern: Json{
	"detail-type": []any{"MyDetailType"},
	"source": []any{"WebApp"},
},
	RoleArn: EBRuleRole.Arn,
	Targets: []any{EBRuleTargetLambdaTarget},
}
