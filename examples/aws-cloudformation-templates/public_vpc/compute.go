// Package public_vpc contains CloudFormation resources.
// Compute resources: EC2, Lambda, ECS, etc.
//
// Generated by wetwire-aws import.
package public_vpc

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/autoscaling"
	"github.com/lex00/wetwire-aws-go/resources/ec2"
	"github.com/lex00/wetwire-aws-go/resources/ecs"
)

var ECSCluster = ecs.Cluster{
}

var ContainerInstancesLaunchTemplateDataIamInstanceProfile = ec2.LaunchTemplate_IamInstanceProfile{
	Arn: EC2InstanceProfile.Arn,
}

var ContainerInstancesLaunchTemplateData = ec2.LaunchTemplate_LaunchTemplateData{
	IamInstanceProfile: &ContainerInstancesLaunchTemplateDataIamInstanceProfile,
	ImageId: ECSAMI,
	InstanceType: InstanceType,
	SecurityGroupIds: Any(EcsHostSecurityGroup),
	UserData: Base64{Sub{String: "#!/bin/bash -xe\necho ECS_CLUSTER=${ECSCluster} >> /etc/ecs/ecs.config\nyum install -y aws-cfn-bootstrap\n/opt/aws/bin/cfn-signal -e $? --stack ${AWS::StackName} --resource ECSAutoScalingGroup --region ${AWS::Region}\n"}},
}

var ContainerInstances = ec2.LaunchTemplate{
	LaunchTemplateData: ContainerInstancesLaunchTemplateData,
}

var ECSAutoScalingGroupLaunchTemplate = autoscaling.AutoScalingGroup_LaunchTemplateSpecification{
	LaunchTemplateId: ContainerInstances,
	Version: ContainerInstances.LatestVersionNumber,
}

var ECSAutoScalingGroup = autoscaling.AutoScalingGroup{
	DesiredCapacity: DesiredCapacity,
	LaunchTemplate: &ECSAutoScalingGroupLaunchTemplate,
	MaxSize: MaxSize,
	MinSize: "1",
	VPCZoneIdentifier: Any(PublicSubnetOne, PublicSubnetTwo),
}
