// Package log_setup_target_accounts contains CloudFormation resources.
// Messaging resources: SNS, SQS, EventBridge, etc.
//
// Generated by wetwire-aws import.
package log_setup_target_accounts

import (
	"github.com/lex00/cloudformation-schema-go/enums"
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/events"
	"github.com/lex00/wetwire-aws-go/resources/sqs"
)

var DeadLetterQueue = sqs.Queue{
	QueueName: "CloudFormation-Logs-DLQ",
}

var CloudFormationEventRuleTargetCentralEventBusDeadLetterConfig = events.EventBus_DeadLetterConfig{
	Arn: DeadLetterQueue.Arn,
}

var CloudFormationEventRuleTargetCentralEventBus = events.Rule_Target{
	Arn: CentralEventBusArn,
	DeadLetterConfig: CloudFormationEventRuleTargetCentralEventBusDeadLetterConfig,
	Id: "CentralEventBus",
	RoleArn: EventBridgeRole.Arn,
}

var CloudFormationEventRule = events.Rule{
	EventBusName: Sub{String: "arn:aws:events:${AWS::Region}:${AWS::AccountId}:event-bus/default"},
	EventPattern: Json{
	"source": []any{"aws.cloudformation"},
},
	Name: "CloudFormationEventRule",
	State: enums.EventsRuleStateEnabled,
	Targets: []any{CloudFormationEventRuleTargetCentralEventBus},
}

var DeadLetterQueuePolicyPolicyDocument = PolicyDocument{
	Statement: []any{DeadLetterQueuePolicyPolicyDocumentStatement0},
	Version: "2012-10-17",
}

var DeadLetterQueuePolicyPolicyDocumentStatement0 = PolicyStatement{
	Action: "sqs:SendMessage",
	Condition: Json{ArnLike: Json{"aws:SourceArn": Sub{String: "arn:aws:events:${AWS::Region}:${AWS::AccountId}:rule/CloudFormationEventRule"}}},
	Effect: "Allow",
	Principal: ServicePrincipal{"events.amazonaws.com"},
	Resource: DeadLetterQueue.Arn,
	Sid: "AllowEventBridgeToWriteLogs",
}

var DeadLetterQueuePolicy = sqs.QueuePolicy{
	PolicyDocument: DeadLetterQueuePolicyPolicyDocument,
	Queues: []any{DeadLetterQueue},
}
