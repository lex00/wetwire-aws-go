// Package destination contains CloudFormation resources.
// Security resources: IAM, Cognito, KMS, etc.
//
// Generated by wetwire-aws import.
package destination

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/kms"
)

var KmsKeyKeyPolicy = PolicyDocument{
	Statement: Any(KmsKeyKeyPolicyStatement0, KmsKeyKeyPolicyStatement1),
	Version: "2012-10-17",
}

var KmsKeyKeyPolicyStatement1 = PolicyStatement{
	Action: Any("kms:Encrypt", "kms:ReEncrypt*", "kms:GenerateDataKey*", "kms:DescribeKey"),
	Effect: "Allow",
	Principal: AWSPrincipal{Sub{String: "arn:${AWS::Partition}:iam::${AccountIdSource}:root"}},
	Resource: "*",
	Sid: "Allow source account access to KMS key in destination account",
}

var KmsKeyKeyPolicyStatement0 = PolicyStatement{
	Action: "kms:*",
	Effect: "Allow",
	Principal: AWSPrincipal{Sub{String: "arn:${AWS::Partition}:iam::${AWS::AccountId}:root"}},
	Resource: "*",
	Sid: "Allow destination account access to KMS key in destination account",
}

var KmsKey = kms.Key{
	EnableKeyRotation: true,
	KeyPolicy: KmsKeyKeyPolicy,
}

var KmsKeyAlias = kms.Alias{
	AliasName: Sub{String: "alias/${AWS::StackName}-${AWS::AccountId}-kms-key"},
	TargetKeyId: KmsKey,
}
