// Package destination contains CloudFormation resources.
// Storage resources: S3, EFS, etc.
//
// Generated by wetwire-aws import.
package destination

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/s3"
)

var S3BucketDestinationBucketEncryptionServerSideEncryptionConfiguration1ServerSideEncryptionByDefault = s3.Bucket_ServerSideEncryptionByDefault{
	KMSMasterKeyID: KmsKey,
	SSEAlgorithm: "aws:kms",
}

var S3BucketDestinationBucketEncryptionServerSideEncryptionConfiguration1 = s3.Bucket_ServerSideEncryptionRule{
	BucketKeyEnabled: true,
	ServerSideEncryptionByDefault: S3BucketDestinationBucketEncryptionServerSideEncryptionConfiguration1ServerSideEncryptionByDefault,
}

var S3BucketDestinationVersioningConfiguration = s3.Bucket_VersioningConfiguration{
	Status: "Enabled",
}

var S3BucketDestinationPublicAccessBlockConfiguration = s3.Bucket_PublicAccessBlockConfiguration{
	BlockPublicAcls: true,
	BlockPublicPolicy: true,
	IgnorePublicAcls: true,
	RestrictPublicBuckets: true,
}

var S3BucketDestinationBucketEncryption = s3.Bucket_BucketEncryption{
	ServerSideEncryptionConfiguration: []any{S3BucketDestinationBucketEncryptionServerSideEncryptionConfiguration1},
}

var S3BucketDestination = s3.Bucket{
	BucketEncryption: S3BucketDestinationBucketEncryption,
	BucketName: Sub{String: "${AWS::StackName}-${AWS::AccountId}-bucket"},
	PublicAccessBlockConfiguration: S3BucketDestinationPublicAccessBlockConfiguration,
	VersioningConfiguration: S3BucketDestinationVersioningConfiguration,
}

var S3BucketDestinationPolicyPolicyDocument = PolicyDocument{
	Statement: []any{S3BucketDestinationPolicyPolicyDocumentStatement0, S3BucketDestinationPolicyPolicyDocumentStatement1},
	Version: "2012-10-17",
}

var S3BucketDestinationPolicyPolicyDocumentStatement1 = DenyStatement{
	Action: "s3:*",
	Condition: Json{Bool: Json{"aws:SecureTransport": false}},
	Principal: AWSPrincipal{"*"},
	Resource: SubWithMap{String: "${varBucketArn}/*", Variables: Json{
	"varBucketArn": S3BucketDestination.Arn,
}},
}

var S3BucketDestinationPolicyPolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"s3:ReplicateDelete", "s3:ReplicateObject", "s3:ReplicateTags", "s3:GetObjectVersionTagging", "s3:ObjectOwnerOverrideToBucketOwner"},
	Effect: "Allow",
	Principal: AWSPrincipal{AccountIdSource},
	Resource: SubWithMap{String: "${varBucketArn}/*", Variables: Json{
	"varBucketArn": S3BucketDestination.Arn,
}},
	Sid: "Allow source account access to destination bucket",
}

var S3BucketDestinationPolicy = s3.BucketPolicy{
	Bucket: S3BucketDestination,
	PolicyDocument: S3BucketDestinationPolicyPolicyDocument,
}
