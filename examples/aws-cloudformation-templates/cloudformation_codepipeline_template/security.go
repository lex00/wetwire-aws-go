// Package cloudformation_codepipeline_template contains CloudFormation resources.
// Security resources: IAM, Cognito, KMS, etc.
//
// Generated by wetwire-aws import.
package cloudformation_codepipeline_template

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/iam"
)

var PipelineRolePolicyCanStartCodeBuildPolicyDocument = PolicyDocument{
	Statement: []any{PipelineRolePolicyCanStartCodeBuildPolicyDocumentStatement0},
	Version: "2012-10-17",
}

var PipelineRolePolicyCanStartCodeBuildPolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"codebuild:BatchGetBuilds", "codebuild:StartBuild"},
	Effect: "Allow",
	Resource: []any{ImportValue{Sub{String: "${CodeBuildStack}-AppBuildArn"}}, ImportValue{Sub{String: "${CodeBuildStack}-AppDeployArn"}}},
}

var PipelineRolePolicyCanAccessS3PolicyDocument = PolicyDocument{
	Statement: []any{PipelineRolePolicyCanAccessS3PolicyDocumentStatement0, PipelineRolePolicyCanAccessS3PolicyDocumentStatement1},
	Version: "2012-10-17",
}

var PipelineRolePolicyCanAccessS3PolicyDocumentStatement1 = PolicyStatement{
	Action: []any{"s3:GetObject", "s3:GetObjectVersion", "s3:GetBucketVersioning", "s3:PutObject", "s3:GetBucketPolicy", "s3:GetObjectAcl", "s3:PutObjectAcl", "s3:DeleteObject"},
	Effect: "Allow",
	Resource: []any{ImportValue{Sub{String: "${CodeBuildStack}-PipelineS3BucketArn"}}, SubWithMap{String: "${filename}/*", Variables: map[string]any{
	"filename": ImportValue{Sub{String: "${CodeBuildStack}-PipelineS3BucketArn"}},
}}},
}

var PipelineRolePolicyCanAccessS3PolicyDocumentStatement0 = PolicyStatement{
	Action: "s3:ListBucket",
	Effect: "Allow",
	Resource: "*",
}

var PipelineRolePolicyCanAccessCodeCommitPolicyDocument = PolicyDocument{
	Statement: []any{PipelineRolePolicyCanAccessCodeCommitPolicyDocumentStatement0},
	Version: "2012-10-17",
}

var PipelineRolePolicyCanAccessCodeCommitPolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"codecommit:GetBranch", "codecommit:GetCommit", "codecommit:UploadArchive", "codecommit:GetUploadArchiveStatus"},
	Effect: "Allow",
	Resource: []any{ImportValue{Sub{String: "${CodeBuildStack}-CodeCommitArn"}}},
}

var PipelineRolePolicyCanStartCodeBuild = iam.Role_Policy{
	PolicyDocument: PipelineRolePolicyCanStartCodeBuildPolicyDocument,
	PolicyName: "CanStartCodeBuild",
}

var PipelineRolePolicyCanAccessS3 = iam.Role_Policy{
	PolicyDocument: PipelineRolePolicyCanAccessS3PolicyDocument,
	PolicyName: "CanAccessS3",
}

var PipelineRolePolicyCanAccessCodeCommit = iam.Role_Policy{
	PolicyDocument: PipelineRolePolicyCanAccessCodeCommitPolicyDocument,
	PolicyName: "CanAccessCodeCommit",
}

var PipelineRoleAssumeRolePolicyDocument = PolicyDocument{
	Statement: []any{PipelineRoleAssumeRolePolicyDocumentStatement0},
	Version: "2012-10-17",
}

var PipelineRoleAssumeRolePolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"sts:AssumeRole"},
	Effect: "Allow",
	Principal: ServicePrincipal{"codepipeline.amazonaws.com"},
}

var PipelineRole = iam.Role{
	AssumeRolePolicyDocument: PipelineRoleAssumeRolePolicyDocument,
	Policies: List(PipelineRolePolicyCanAccessCodeCommit, PipelineRolePolicyCanAccessS3, PipelineRolePolicyCanStartCodeBuild),
}

var EventRolePolicyEbNegpipelineNegexecPolicyDocument = PolicyDocument{
	Statement: []any{EventRolePolicyEbNegpipelineNegexecPolicyDocumentStatement0},
	Version: "2012-10-17",
}

var EventRolePolicyEbNegpipelineNegexecPolicyDocumentStatement0 = PolicyStatement{
	Action: "codepipeline:StartPipelineExecution",
	Effect: "Allow",
	Resource: Join{"", []any{
	"arn:aws:codepipeline:",
	AWS_REGION,
	":",
	AWS_ACCOUNT_ID,
	":",
	Pipeline,
}},
}

var EventRolePolicyEbNegpipelineNegexec = iam.Role_Policy{
	PolicyDocument: EventRolePolicyEbNegpipelineNegexecPolicyDocument,
	PolicyName: "eb-pipeline-execution",
}

var EventRoleAssumeRolePolicyDocument = PolicyDocument{
	Statement: []any{EventRoleAssumeRolePolicyDocumentStatement0},
	Version: "2012-10-17",
}

var EventRoleAssumeRolePolicyDocumentStatement0 = PolicyStatement{
	Action: "sts:AssumeRole",
	Effect: "Allow",
	Principal: ServicePrincipal{"events.amazonaws.com"},
}

var EventRole = iam.Role{
	AssumeRolePolicyDocument: EventRoleAssumeRolePolicyDocument,
	Path: "/",
	Policies: List(EventRolePolicyEbNegpipelineNegexec),
}
