// Package cloudformation_codepipeline_template contains CloudFormation resources.
// CI/CD resources: CodeBuild, CodePipeline, etc.
//
// Generated by wetwire-aws import.
package cloudformation_codepipeline_template

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/codepipeline"
)

var PipelineStageDeployNegAppActionAppNegDeployInputArtifactFullZip = codepipeline.Pipeline_InputArtifact{
	Name: "FullZip",
}

var PipelineStageDeployNegAppActionAppNegDeployInputArtifactSource = codepipeline.Pipeline_InputArtifact{
	Name: "Source",
}

var PipelineStageDeployNegAppActionAppNegDeployActionTypeId = codepipeline.Pipeline_ActionTypeId{
	Category: "Build",
	Owner: "AWS",
	Provider: "CodeBuild",
	Version: 1,
}

var PipelineStageDeployNegAppActionApprovalActionTypeId = codepipeline.Pipeline_ActionTypeId{
	Category: "Approval",
	Owner: "AWS",
	Provider: "Manual",
	Version: 1,
}

var PipelineStageBuildNegAppBuildActionAppNegBuildOutputArtifactFullZip = codepipeline.Pipeline_OutputArtifact{
	Name: "FullZip",
}

var PipelineStageBuildNegAppBuildActionAppNegBuildInputArtifactSource = codepipeline.Pipeline_InputArtifact{
	Name: "Source",
}

var PipelineStageBuildNegAppBuildActionAppNegBuildActionTypeId = codepipeline.Pipeline_ActionTypeId{
	Category: "Build",
	Owner: "AWS",
	Provider: "CodeBuild",
	Version: 1,
}

var PipelineStageSourceActionSourceOutputArtifactSource = codepipeline.Pipeline_OutputArtifact{
	Name: "Source",
}

var PipelineStageSourceActionSourceActionTypeId = codepipeline.Pipeline_ActionTypeId{
	Category: "Source",
	Owner: "AWS",
	Provider: "CodeCommit",
	Version: 1,
}

var PipelineStageDeployNegAppActionAppNegDeploy = codepipeline.Pipeline_ActionDeclaration{
	ActionTypeId: PipelineStageDeployNegAppActionAppNegDeployActionTypeId,
	Configuration: Json{"EnvironmentVariables": "[{\"name\":\"ENVIRONMENT\",\"value\":\"SampleEnv\",\"type\":\"PLAINTEXT\"}]", "PrimarySource": "Source", "ProjectName": ImportValue{Sub{String: "${CodeBuildStack}-AppDeploy"}}},
	InputArtifacts: []any{PipelineStageDeployNegAppActionAppNegDeployInputArtifactSource, PipelineStageDeployNegAppActionAppNegDeployInputArtifactFullZip},
	Name: "App-Deploy",
	RunOrder: 3,
}

var PipelineStageDeployNegAppActionApproval = codepipeline.Pipeline_ActionDeclaration{
	ActionTypeId: PipelineStageDeployNegAppActionApprovalActionTypeId,
	Configuration: Json{"CustomData": "Review the build output and approve to deploy"},
	Name: "Approval",
	RunOrder: 2,
}

var PipelineStageBuildNegAppBuildActionAppNegBuild = codepipeline.Pipeline_ActionDeclaration{
	ActionTypeId: PipelineStageBuildNegAppBuildActionAppNegBuildActionTypeId,
	Configuration: Json{"ProjectName": ImportValue{Sub{String: "${CodeBuildStack}-AppBuild"}}},
	InputArtifacts: []any{PipelineStageBuildNegAppBuildActionAppNegBuildInputArtifactSource},
	Name: "App-Build",
	OutputArtifacts: []any{PipelineStageBuildNegAppBuildActionAppNegBuildOutputArtifactFullZip},
	RunOrder: 1,
}

var PipelineStageSourceActionSource = codepipeline.Pipeline_ActionDeclaration{
	ActionTypeId: PipelineStageSourceActionSourceActionTypeId,
	Configuration: Json{"BranchName": "main", "PollForSourceChanges": false, "RepositoryName": ImportValue{Sub{String: "${CodeBuildStack}-CodeCommitName"}}},
	Name: "Source",
	OutputArtifacts: []any{PipelineStageSourceActionSourceOutputArtifactSource},
}

var PipelineStageDeployNegApp = codepipeline.Pipeline_StageDeclaration{
	Actions: []any{PipelineStageDeployNegAppActionApproval, PipelineStageDeployNegAppActionAppNegDeploy},
	Name: "Deploy-App",
}

var PipelineStageBuildNegAppBuild = codepipeline.Pipeline_StageDeclaration{
	Actions: []any{PipelineStageBuildNegAppBuildActionAppNegBuild},
	Name: "Build-AppBuild",
}

var PipelineStageSource = codepipeline.Pipeline_StageDeclaration{
	Actions: []any{PipelineStageSourceActionSource},
	Name: "Source",
}

var PipelineArtifactStore = codepipeline.Pipeline_ArtifactStore{
	Location: ImportValue{Sub{String: "${CodeBuildStack}-PipelineS3Bucket"}},
	Type_: "S3",
}

var Pipeline = codepipeline.Pipeline{
	ArtifactStore: PipelineArtifactStore,
	Name: Sub{String: "${AWS::StackName}-Code-Pipeline"},
	RestartExecutionOnUpdate: false,
	RoleArn: PipelineRole.Arn,
	Stages: []any{PipelineStageSource, PipelineStageBuildNegAppBuild, PipelineStageDeployNegApp},
}
