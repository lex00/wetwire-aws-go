// Package cloudwatch_dashboard_nat_flowlogs contains CloudFormation resources.
// Monitoring resources: CloudWatch, Logs, etc.
//
// Generated by wetwire-aws import.
package cloudwatch_dashboard_nat_flowlogs

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/cloudwatch"
)

var CloudWatchDashboard = cloudwatch.Dashboard{
	DashboardBody: Sub{String: "{\n  \"widgets\": [\n    {\n      \"type\": \"log\",\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 12,\n      \"height\": 9,\n      \"properties\": {\n        \"query\": \"SOURCE '${LogGroupName}' | fields @timestamp, @message | filter (dstAddr like '${NatGatewayPrivateIP}' and isIpv4InSubnet(srcAddr, '${VpcCidr}')) | stats sum(bytes) as bytesTransferred by srcAddr, dstAddr | sort bytesTransferred desc | limit 10\",\n        \"region\": \"${AWS::Region}\",\n        \"stacked\": false,\n        \"title\": \"Top 10 - Instances sending most traffic through NAT gateway ${NatGatewayID}\", \n        \"view\": \"table\"\n      }\n    },\n    {\n      \"type\": \"log\",\n      \"x\": 12,\n      \"y\": 0,\n      \"width\": 12,\n      \"height\": 9,\n      \"properties\": {\n        \"query\": \"SOURCE '${LogGroupName}' | fields @timestamp, @message | filter (dstAddr like '${NatGatewayPrivateIP}' and isIpv4InSubnet(srcAddr, '${VpcCidr}')) or (srcAddr like '${NatGatewayPrivateIP}' and isIpv4InSubnet(dstAddr, '${VpcCidr}'))| stats sum(bytes) as bytesTransferred by srcAddr, dstAddr | sort bytesTransferred desc | limit 10\",\n        \"region\": \"${AWS::Region}\",\n        \"stacked\": false,\n        \"title\": \"Top 10 - Traffic To and from NAT gateway ${NatGatewayID}\",\n        \"view\": \"table\"\n      }\n    },\n    {\n      \"type\": \"log\",\n      \"x\": 0,\n      \"y\": 9,\n      \"width\": 12,\n      \"height\": 9,\n      \"properties\": {\n        \"query\": \"SOURCE '${LogGroupName}' | fields @timestamp, @message | filter (srcAddr like '${NatGatewayPrivateIP}' and not isIpv4InSubnet(dstAddr, '${VpcCidr}')) | stats sum(bytes) as bytesTransferred by srcAddr, dstAddr | sort bytesTransferred desc | limit 10\",\n        \"region\": \"${AWS::Region}\",\n        \"stacked\": false,\n        \"title\": \"Top 10 - Most often upload communication destinations through NAT Gateway ${NatGatewayID}\",\n        \"view\": \"table\"\n      }\n    },\n    {\n      \"type\": \"log\",\n      \"x\": 12,\n      \"y\": 9,\n      \"width\": 12,\n      \"height\": 9,\n      \"properties\": {\n        \"query\": \"SOURCE '${LogGroupName}' | fields @timestamp, @message | filter (dstAddr like '${NatGatewayPrivateIP}' and not isIpv4InSubnet(srcAddr, '${VpcCidr}')) | stats sum(bytes) as bytesTransferred by srcAddr, dstAddr | sort bytesTransferred desc | limit 10\",\n        \"region\": \"${AWS::Region}\",\n        \"stacked\": false,\n        \"title\": \"Top 10 - Most often download communication destinations through NAT Gateway ${NatGatewayID}\",\n        \"view\": \"table\"\n      }\n    }\n  ]\n}\n"},
	DashboardName: Sub{String: "${NatGatewayID}-Traffic-Dashboard"},
}
