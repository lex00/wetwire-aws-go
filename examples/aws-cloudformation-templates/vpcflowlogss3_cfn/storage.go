// Package vpcflowlogss3_cfn contains CloudFormation resources.
// Storage resources: S3, EFS, etc.
//
// Generated by wetwire-aws import.
package vpcflowlogss3_cfn

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/s3"
)

var VPCFlowLogsBucketBucketEncryptionServerSideEncryptionConfiguration1ServerSideEncryptionByDefault = s3.Bucket_ServerSideEncryptionByDefault{
	KMSMasterKeyID: If{"VPCFlowLogsBucketKMSKeyCondition", VPCFlowLogsBucketKMSKey, AWS_NO_VALUE},
	SSEAlgorithm: If{"VPCFlowLogsBucketKMSKeyCondition", "aws:kms", "AES256"},
}

var VPCFlowLogsBucketBucketEncryptionServerSideEncryptionConfiguration1 = s3.Bucket_ServerSideEncryptionRule{
	BucketKeyEnabled: If{"VPCFlowLogsBucketKMSKeyCondition", VPCFlowLogsBucketKeyEnabled, AWS_NO_VALUE},
	ServerSideEncryptionByDefault: &VPCFlowLogsBucketBucketEncryptionServerSideEncryptionConfiguration1ServerSideEncryptionByDefault,
}

var VPCFlowLogsBucketVersioningConfiguration = s3.Bucket_VersioningConfiguration{
	Status: "Enabled",
}

var VPCFlowLogsBucketPublicAccessBlockConfiguration = s3.Bucket_PublicAccessBlockConfiguration{
	BlockPublicAcls: true,
	BlockPublicPolicy: true,
	IgnorePublicAcls: true,
	RestrictPublicBuckets: true,
}

var VPCFlowLogsBucketBucketEncryption = s3.Bucket_BucketEncryption{
	ServerSideEncryptionConfiguration: []any{VPCFlowLogsBucketBucketEncryptionServerSideEncryptionConfiguration1},
}

var VPCFlowLogsBucket = s3.Bucket{
	BucketEncryption: &VPCFlowLogsBucketBucketEncryption,
	BucketName: Sub{String: "aws-vpcflowlogs-${AWS::AccountId}-${AWS::Region}"},
	LoggingConfiguration: If{"S3AccessLogsCondition", Json{
	"DestinationBucketName": S3AccessLogsBucketName,
}, AWS_NO_VALUE},
	PublicAccessBlockConfiguration: &VPCFlowLogsBucketPublicAccessBlockConfiguration,
	VersioningConfiguration: &VPCFlowLogsBucketVersioningConfiguration,
}

var VPCFlowLogsBucketPolicyPolicyDocument = PolicyDocument{
	Statement: []any{VPCFlowLogsBucketPolicyPolicyDocumentStatement0, VPCFlowLogsBucketPolicyPolicyDocumentStatement1, VPCFlowLogsBucketPolicyPolicyDocumentStatement2},
	Version: "2012-10-17",
}

var VPCFlowLogsBucketPolicyPolicyDocumentStatement2 = DenyStatement{
	Action: "s3:*",
	Condition: Json{Bool: Json{"aws:SecureTransport": false}},
	Principal: "*",
	Resource: []any{Sub{String: "arn:${AWS::Partition}:s3:::${VPCFlowLogsBucket}"}, Sub{String: "arn:${AWS::Partition}:s3:::${VPCFlowLogsBucket}/*"}},
	Sid: "DenyNonSSLRequests",
}

var VPCFlowLogsBucketPolicyPolicyDocumentStatement1 = PolicyStatement{
	Action: "s3:GetBucketAcl",
	Effect: "Allow",
	Principal: ServicePrincipal{"delivery.logs.amazonaws.com"},
	Resource: Sub{String: "arn:${AWS::Partition}:s3:::${VPCFlowLogsBucket}"},
	Sid: "AWSLogDeliveryAclCheck",
}

var VPCFlowLogsBucketPolicyPolicyDocumentStatement0 = PolicyStatement{
	Action: "s3:PutObject",
	Condition: Json{StringEquals: Json{"s3:x-amz-acl": "bucket-owner-full-control"}},
	Effect: "Allow",
	Principal: ServicePrincipal{"delivery.logs.amazonaws.com"},
	Resource: Sub{String: "arn:${AWS::Partition}:s3:::${VPCFlowLogsBucket}/*"},
	Sid: "AWSLogDeliveryWrite",
}

var VPCFlowLogsBucketPolicy = s3.BucketPolicy{
	Bucket: VPCFlowLogsBucket,
	PolicyDocument: VPCFlowLogsBucketPolicyPolicyDocument,
}
