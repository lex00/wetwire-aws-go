// Package log_setup_management_pkg contains CloudFormation resources.
// Messaging resources: SNS, SQS, EventBridge, etc.
//
// Generated by wetwire-aws import.
package log_setup_management_pkg

import (
	"github.com/lex00/cloudformation-schema-go/enums"
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/events"
	"github.com/lex00/wetwire-aws-go/resources/sqs"
)

var DeadLetterQueue = sqs.Queue{
	QueueName: Sub{String: "${CentralEventBusName}-DLQ"},
}

var CentralEventBusDeadLetterConfig = events.EventBus_DeadLetterConfig{
	Arn: DeadLetterQueue.Arn,
}

var CentralEventBus = events.EventBus{
	DeadLetterConfig: CentralEventBusDeadLetterConfig,
	Description: "A custom event bus in the central account to be used as a destination for events from a rule in target accounts",
	Name: CentralEventBusName,
}

var CentralEventBusPolicy = events.EventBusPolicy{
	EventBusName: CentralEventBus,
	Statement: Json{
	"Action": "events:PutEvents",
	"Condition": Json{
	"StringEquals": Json{
	"aws:PrincipalOrgID": OrgID,
},
},
	"Effect": "Allow",
	"Principal": "*",
	"Resource": Sub{String: "arn:aws:events:${AWS::Region}:${AWS::AccountId}:event-bus/${CentralEventBusName}"},
},
	StatementId: "CentralEventBusPolicyStatement",
}

var CentralEventRuleTargetCloudFormationLogsToDeadLetterConfig = events.EventBus_DeadLetterConfig{
	Arn: DeadLetterQueue.Arn,
}

var CentralEventRuleTargetCloudFormationLogsTo = events.Rule_Target{
	Arn: CentralEventLog.Arn,
	DeadLetterConfig: CentralEventRuleTargetCloudFormationLogsToDeadLetterConfig,
	Id: "CloudFormationLogsToCentralGroup",
}

var CentralEventRule = events.Rule{
	EventBusName: CentralEventBusName,
	EventPattern: Json{
	"source": []any{Json{
	"prefix": "",
}},
},
	Name: "CloudFormationLogs",
	State: enums.EventsRuleStateEnabled,
	Targets: []any{CentralEventRuleTargetCloudFormationLogsTo},
}
