// Package cloudfront_stack contains CloudFormation resources.
// Network resources: VPC, Subnets, Load Balancers, CloudFront, etc.
//
// Generated by wetwire-aws import.
package cloudfront_stack

import (
	"github.com/lex00/cloudformation-schema-go/enums"
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/cloudfront"
	"github.com/lex00/wetwire-aws-go/resources/ec2"
	"github.com/lex00/wetwire-aws-go/resources/elasticloadbalancingv2"
)

var ALBExternalAccessSGTagEnvironment = Tag{
	Key: "Environment",
	Value: Environment,
}

var ALBExternalAccessSGTagName = Tag{
	Key: "Name",
	Value: Sub{String: "${AppName}-${Environment}-alb-external-access-ingrees-SG"},
}

var ALBExternalAccessSG = ec2.SecurityGroup{
	GroupDescription: "Allow external access to ALB",
	Tags: []any{ALBExternalAccessSGTagName, ALBExternalAccessSGTagEnvironment},
	VpcId: VpcId,
}

var EC2InstanceSGTagEnvironment = Tag{
	Key: "Environment",
	Value: Environment,
}

var EC2InstanceSGTagName = Tag{
	Key: "Name",
	Value: Sub{String: "${AppName}-${Environment}-ec2-instance-SG"},
}

var EC2InstanceSG = ec2.SecurityGroup{
	GroupDescription: "EC2 Instance Security Group",
	Tags: []any{EC2InstanceSGTagName, EC2InstanceSGTagEnvironment},
	VpcId: VpcId,
}

var HTTPSTcpIn = ec2.SecurityGroupIngress{
	CidrIp: "0.0.0.0/0",
	FromPort: 443,
	GroupId: ALBExternalAccessSG,
	IpProtocol: "tcp",
	ToPort: 443,
}

var HTTPTcpIn = ec2.SecurityGroupIngress{
	CidrIp: "0.0.0.0/0",
	FromPort: 80,
	GroupId: ALBExternalAccessSG,
	IpProtocol: "tcp",
	ToPort: 80,
}

var OriginALBTGTarget1 = elasticloadbalancingv2.TargetGroup_TargetDescription{
	Id: EC2Instance,
	Port: OriginALBTGPort,
}

var OriginALBTGTargetGroupAttributeDeregistrationdelayt = elasticloadbalancingv2.TargetGroup_TargetGroupAttribute{
	Key: "deregistration_delay.timeout_seconds",
	Value: ALBTargetGroupAttributeDeregistration,
}

var OriginALBTGTagEnvironment = Tag{
	Key: "Environment",
	Value: Environment,
}

var OriginALBTGTagName = Tag{
	Key: "Name",
	Value: Sub{String: "${AppName}-${Environment}-alb-tg"},
}

var OriginALBTG = elasticloadbalancingv2.TargetGroup{
	HealthCheckIntervalSeconds: ALBTargetGroupHealthCheckIntervalSeconds,
	HealthCheckPath: HealthCheckPath,
	HealthCheckPort: OriginALBTGPort,
	HealthCheckProtocol: HealthCheckProtocol,
	HealthCheckTimeoutSeconds: ALBTargetGroupHealthCheckTimeoutSeconds,
	HealthyThresholdCount: ALBTargetGroupHealthyThresholdCount,
	Name: Sub{String: "${AppName}-${Environment}-alb-tg"},
	Port: OriginALBTGPort,
	Protocol: enums.Elbv2ProtocolEnumHttp,
	Tags: []any{OriginALBTGTagName, OriginALBTGTagEnvironment},
	TargetGroupAttributes: []any{OriginALBTGTargetGroupAttributeDeregistrationdelayt},
	TargetType: enums.Elbv2TargetTypeEnumInstance,
	Targets: []any{OriginALBTGTarget1},
	UnhealthyThresholdCount: ALBTargetGroupUnhealthyThresholdCount,
	VpcId: VpcId,
}

var Tcp8080In = ec2.SecurityGroupIngress{
	FromPort: "8080",
	GroupId: EC2InstanceSG,
	IpProtocol: "tcp",
	SourceSecurityGroupId: ALBExternalAccessSG,
	ToPort: "8080",
}

var Tcp8080Out = ec2.SecurityGroupEgress{
	DestinationSecurityGroupId: EC2InstanceSG,
	FromPort: 8080,
	GroupId: ALBExternalAccessSG,
	IpProtocol: "tcp",
	ToPort: 8080,
}

var OriginALBHttpsListenerDefaultActionForward = elasticloadbalancingv2.Listener_Action{
	TargetGroupArn: OriginALBTG,
	Type_: "forward",
}

var OriginALBHttpsListenerCertificate1 = elasticloadbalancingv2.Listener_Certificate{
	CertificateArn: Sub{String: "arn:${AWS::Partition}:acm:${AWS::Region}:${AWS::AccountId}:certificate/${ACMCertificateIdentifier}"},
}

var OriginALBHttpsListener = elasticloadbalancingv2.Listener{
	Certificates: []any{OriginALBHttpsListenerCertificate1},
	DefaultActions: []any{OriginALBHttpsListenerDefaultActionForward},
	LoadBalancerArn: OriginALB,
	Port: 443,
	Protocol: enums.Elbv2ProtocolEnumHttps,
	SslPolicy: "ELBSecurityPolicy-FS-2018-06",
}

var OriginALBHttpsListenerRuleCondition1 = elasticloadbalancingv2.ListenerRule_RuleCondition{
	Field: "path-pattern",
	Values: []any{"/*"},
}

var OriginALBHttpsListenerRuleActionForward = elasticloadbalancingv2.ListenerRule_Action{
	TargetGroupArn: OriginALBTG,
	Type_: "forward",
}

var OriginALBHttpsListenerRule = elasticloadbalancingv2.ListenerRule{
	Actions: []any{OriginALBHttpsListenerRuleActionForward},
	Conditions: []any{OriginALBHttpsListenerRuleCondition1},
	ListenerArn: OriginALBHttpsListener,
	Priority: 1,
}

var OriginALBTagEnvironment = Tag{
	Key: "Environment",
	Value: Environment,
}

var OriginALBTagName = Tag{
	Key: "Name",
	Value: Sub{String: "${AppName}-${Environment}-alb"},
}

var OriginALBLoadBalancerAttributeRoutinghttp2enabled = elasticloadbalancingv2.LoadBalancer_LoadBalancerAttribute{
	Key: "routing.http2.enabled",
	Value: ALBAttributeRoutingHttp2,
}

var OriginALBLoadBalancerAttributeDeletionprotectionen = elasticloadbalancingv2.LoadBalancer_LoadBalancerAttribute{
	Key: "deletion_protection.enabled",
	Value: ALBAttributeDeletionProtection,
}

var OriginALBLoadBalancerAttributeIdletimeouttimeoutse = elasticloadbalancingv2.LoadBalancer_LoadBalancerAttribute{
	Key: "idle_timeout.timeout_seconds",
	Value: ALBAttributeIdleTimeOut,
}

var OriginALB = elasticloadbalancingv2.LoadBalancer{
	LoadBalancerAttributes: []any{OriginALBLoadBalancerAttributeIdletimeouttimeoutse, OriginALBLoadBalancerAttributeDeletionprotectionen, OriginALBLoadBalancerAttributeRoutinghttp2enabled},
	Name: Sub{String: "${AppName}-${Environment}-alb"},
	Scheme: ALBScheme,
	SecurityGroups: []any{ALBExternalAccessSG},
	Subnets: []any{PublicSubnetId1, PublicSubnetId2},
	Tags: []any{OriginALBTagName, OriginALBTagEnvironment},
	Type_: ALBType,
}

var CloudFrontDistributionDistributionConfigDefaultCacheBehaviorForwardedValuesCookies = cloudfront.Distribution_Cookies{
	Forward: ForwardCookies,
}

var CloudFrontDistributionDistributionConfigOrigin1CustomOriginConfig = cloudfront.Distribution_CustomOriginConfig{
	HTTPPort: 80,
	HTTPSPort: 443,
	OriginKeepaliveTimeout: OriginKeepaliveTimeout,
	OriginProtocolPolicy: OriginProtocolPolicy,
	OriginReadTimeout: OriginReadTimeout,
	OriginSSLProtocols: []any{"TLSv1", "TLSv1.1", "TLSv1.2", "SSLv3"},
}

var CloudFrontDistributionDistributionConfigDefaultCacheBehaviorLambdaFunctionAssociation1 = cloudfront.Distribution_LambdaFunctionAssociation{
	EventType: LambdaEventType,
	LambdaFunctionARN: LambdaEdgeVersion,
}

var CloudFrontDistributionDistributionConfigDefaultCacheBehaviorForwardedValues = cloudfront.Distribution_ForwardedValues{
	Cookies: CloudFrontDistributionDistributionConfigDefaultCacheBehaviorForwardedValuesCookies,
	QueryString: QueryString,
}

var CloudFrontDistributionDistributionConfigViewerCertificate = cloudfront.Distribution_ViewerCertificate{
	AcmCertificateArn: Sub{String: "arn:${AWS::Partition}:acm:${AWS::Region}:${AWS::AccountId}:certificate/${ACMCertificateIdentifier}"},
	MinimumProtocolVersion: MinimumProtocolVersion,
	SslSupportMethod: SslSupportMethod,
}

var CloudFrontDistributionDistributionConfigOrigin1 = cloudfront.Distribution_Origin{
	CustomOriginConfig: CloudFrontDistributionDistributionConfigOrigin1CustomOriginConfig,
	DomainName: OriginALB.DNSName,
	Id: OriginALB,
}

var CloudFrontDistributionDistributionConfigLogging = cloudfront.Distribution_Logging{
	Bucket: Sub{String: "${LoggingBucket}.s3.amazonaws.com"},
}

var CloudFrontDistributionDistributionConfigDefaultCacheBehavior = cloudfront.Distribution_DefaultCacheBehavior{
	AllowedMethods: []any{"GET", "HEAD", "DELETE", "OPTIONS", "PATCH", "POST", "PUT"},
	Compress: Compress,
	DefaultTTL: DefaultTTL,
	ForwardedValues: CloudFrontDistributionDistributionConfigDefaultCacheBehaviorForwardedValues,
	LambdaFunctionAssociations: []any{CloudFrontDistributionDistributionConfigDefaultCacheBehaviorLambdaFunctionAssociation1},
	MaxTTL: MaxTTL,
	MinTTL: MinTTL,
	SmoothStreaming: "false",
	TargetOriginId: OriginALB,
	ViewerProtocolPolicy: ViewerProtocolPolicy,
}

var CloudFrontDistributionDistributionConfig = cloudfront.Distribution_DistributionConfig{
	Aliases: []any{AlternateDomainNames},
	Comment: "Cloudfront Distribution pointing ALB Origin",
	DefaultCacheBehavior: CloudFrontDistributionDistributionConfigDefaultCacheBehavior,
	Enabled: true,
	HttpVersion: "http2",
	IPV6Enabled: IPV6Enabled,
	Logging: CloudFrontDistributionDistributionConfigLogging,
	Origins: []any{CloudFrontDistributionDistributionConfigOrigin1},
	PriceClass: PriceClass,
	ViewerCertificate: CloudFrontDistributionDistributionConfigViewerCertificate,
}

var CloudFrontDistribution = cloudfront.Distribution{
	DistributionConfig: CloudFrontDistributionDistributionConfig,
}
