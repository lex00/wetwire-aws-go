// Package efs_with_automount_to_ec2 contains CloudFormation resources.
// Network resources: VPC, Subnets, Load Balancers, CloudFront, etc.
//
// Generated by wetwire-aws import.
package efs_with_automount_to_ec2

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/ec2"
	"github.com/lex00/wetwire-aws-go/resources/elasticloadbalancing"
)

var ELBSecurityGroupSecurityGroupIngressPort443 = ec2.SecurityGroup_Ingress{
	CidrIp: "0.0.0.0/0",
	FromPort: "443",
	IpProtocol: "tcp",
	ToPort: "443",
}

var ELBSecurityGroupSecurityGroupIngressPort80 = ec2.SecurityGroup_Ingress{
	CidrIp: "0.0.0.0/0",
	FromPort: "80",
	IpProtocol: "tcp",
	ToPort: "80",
}

var ELBSecurityGroup = ec2.SecurityGroup{
	GroupDescription: "Enable public access HTTP and HTTPS",
	SecurityGroupIngress: List(ELBSecurityGroupSecurityGroupIngressPort80, ELBSecurityGroupSecurityGroupIngressPort443),
	VpcId: VPC,
}

var ElasticLoadBalancerListener1 = elasticloadbalancing.LoadBalancer_Listeners{
	InstancePort: "80",
	LoadBalancerPort: "80",
	Protocol: "HTTP",
}

var ElasticLoadBalancerHealthCheck = &elasticloadbalancing.LoadBalancer_HealthCheck{
	HealthyThreshold: "3",
	Interval: "30",
	Target: Join{"", []any{
	"HTTP:",
	"80",
	"/",
}},
	Timeout: "5",
	UnhealthyThreshold: "5",
}

var ElasticLoadBalancer = elasticloadbalancing.LoadBalancer{
	CrossZone: "true",
	HealthCheck: ElasticLoadBalancerHealthCheck,
	Listeners: List(ElasticLoadBalancerListener1),
	SecurityGroups: []any{ELBSecurityGroup},
	Subnets: Subnets,
}

var InstanceSecurityGroupSecurityGroupIngressPort80 = ec2.SecurityGroup_Ingress{
	FromPort: "80",
	IpProtocol: "tcp",
	SourceSecurityGroupId: ELBSecurityGroup.GroupId,
	ToPort: "80",
}

var InstanceSecurityGroupSecurityGroupIngressPort22 = ec2.SecurityGroup_Ingress{
	CidrIp: "0.0.0.0/0",
	FromPort: "22",
	IpProtocol: "tcp",
	ToPort: "22",
}

var InstanceSecurityGroup = ec2.SecurityGroup{
	GroupDescription: "Enable SSH public access and HTTP from the load balancer only",
	SecurityGroupIngress: List(InstanceSecurityGroupSecurityGroupIngressPort22, InstanceSecurityGroupSecurityGroupIngressPort80),
	VpcId: VPC,
}

var EFSSecurityGroupSecurityGroupIngressPort2049 = ec2.SecurityGroup_Ingress{
	FromPort: "2049",
	IpProtocol: "tcp",
	SourceSecurityGroupId: InstanceSecurityGroup.GroupId,
	ToPort: "2049",
}

var EFSSecurityGroup = ec2.SecurityGroup{
	GroupDescription: "Enable NFS access from EC2",
	SecurityGroupIngress: List(EFSSecurityGroupSecurityGroupIngressPort2049),
	VpcId: VPC,
}
