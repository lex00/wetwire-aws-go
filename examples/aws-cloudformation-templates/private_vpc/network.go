// Package private_vpc contains CloudFormation resources.
// Network resources: VPC, Subnets, Load Balancers, CloudFront, etc.
//
// Generated by wetwire-aws import.
package private_vpc

import (
	"github.com/lex00/cloudformation-schema-go/enums"
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/ec2"
	"github.com/lex00/wetwire-aws-go/resources/elasticloadbalancingv2"
)

var InternetGateway = ec2.InternetGateway{
}

var NatGatewayOneAttachment = ec2.EIP{
	Domain: "vpc",
}

var NatGatewayTwoAttachment = ec2.EIP{
	Domain: "vpc",
}

var VPC = ec2.VPC{
	CidrBlock: FindInMap{"SubnetConfig", "VPC", "CIDR"},
	EnableDnsHostnames: true,
	EnableDnsSupport: true,
}

var DummyTargetGroupPrivate = elasticloadbalancingv2.TargetGroup{
	HealthCheckIntervalSeconds: 6,
	HealthCheckPath: "/",
	HealthCheckProtocol: "HTTP",
	HealthCheckTimeoutSeconds: 5,
	HealthyThresholdCount: 2,
	Name: Join{Delimiter: "-", Values: []any{
	AWS_STACK_NAME,
	"drop-2",
}},
	Port: 80,
	Protocol: enums.Elbv2ProtocolEnumHttp,
	UnhealthyThresholdCount: 2,
	VpcId: VPC,
}

var DummyTargetGroupPublic = elasticloadbalancingv2.TargetGroup{
	HealthCheckIntervalSeconds: 6,
	HealthCheckPath: "/",
	HealthCheckProtocol: "HTTP",
	HealthCheckTimeoutSeconds: 5,
	HealthyThresholdCount: 2,
	Name: Join{Delimiter: "-", Values: []any{
	AWS_STACK_NAME,
	"drop-1",
}},
	Port: 80,
	Protocol: enums.Elbv2ProtocolEnumHttp,
	UnhealthyThresholdCount: 2,
	VpcId: VPC,
}

var GatewayAttachement = ec2.VPCGatewayAttachment{
	InternetGatewayId: InternetGateway,
	VpcId: VPC,
}

var PrivateLoadBalancerSG = ec2.SecurityGroup{
	GroupDescription: "Access to the internal load balancer",
	VpcId: VPC,
}

var PrivateRouteTableOne = ec2.RouteTable{
	VpcId: VPC,
}

var PrivateRouteTableTwo = ec2.RouteTable{
	VpcId: VPC,
}

var DynamoDBEndpointPolicyDocument = PolicyDocument{
	Statement: []any{DynamoDBEndpointPolicyDocumentStatement0},
	Version: "2012-10-17",
}

var DynamoDBEndpointPolicyDocumentStatement0 = PolicyStatement{
	Action: "*",
	Effect: "Allow",
	Principal: "*",
	Resource: "*",
}

var DynamoDBEndpoint = ec2.VPCEndpoint{
	PolicyDocument: DynamoDBEndpointPolicyDocument,
	RouteTableIds: []any{PrivateRouteTableOne, PrivateRouteTableTwo},
	ServiceName: Join{Delimiter: "", Values: []any{
	"com.amazonaws.",
	AWS_REGION,
	".dynamodb",
}},
	VpcId: VPC,
}

var PublicLoadBalancerSGSecurityGroupIngress1 = ec2.SecurityGroup_Ingress{
	CidrIp: "0.0.0.0/0",
	IpProtocol: -1,
}

var PublicLoadBalancerSG = ec2.SecurityGroup{
	GroupDescription: "Access to the public facing load balancer",
	SecurityGroupIngress: []any{PublicLoadBalancerSGSecurityGroupIngress1},
	VpcId: VPC,
}

var PublicRouteTable = ec2.RouteTable{
	VpcId: VPC,
}

var PublicRoute = ec2.Route{
	DestinationCidrBlock: "0.0.0.0/0",
	GatewayId: InternetGateway,
	RouteTableId: PublicRouteTable,
}

var PrivateSubnetTwo = ec2.Subnet{
	AvailabilityZone: Select{Index: 1, List: GetAZs{}},
	CidrBlock: FindInMap{"SubnetConfig", "PrivateTwo", "CIDR"},
	VpcId: VPC,
}

var PrivateLoadBalancerLoadBalancerAttributeIdletimeouttimeoutse = elasticloadbalancingv2.LoadBalancer_LoadBalancerAttribute{
	Key: "idle_timeout.timeout_seconds",
	Value: "30",
}

var PrivateLoadBalancer = elasticloadbalancingv2.LoadBalancer{
	LoadBalancerAttributes: []any{PrivateLoadBalancerLoadBalancerAttributeIdletimeouttimeoutse},
	Scheme: "internal",
	SecurityGroups: []any{PrivateLoadBalancerSG},
	Subnets: []any{PrivateSubnetOne, PrivateSubnetTwo},
}

var PrivateSubnetOne = ec2.Subnet{
	AvailabilityZone: Select{Index: 0, List: GetAZs{}},
	CidrBlock: FindInMap{"SubnetConfig", "PrivateOne", "CIDR"},
	VpcId: VPC,
}

var PrivateRouteOne = ec2.Route{
	DestinationCidrBlock: "0.0.0.0/0",
	NatGatewayId: NatGatewayOne,
	RouteTableId: PrivateRouteTableOne,
}

var EcsHostSecurityGroup = ec2.SecurityGroup{
	GroupDescription: "Access to the ECS hosts that run containers",
	VpcId: VPC,
}

var PublicSubnetOneRouteTableAssociation = ec2.SubnetRouteTableAssociation{
	RouteTableId: PublicRouteTable,
	SubnetId: PublicSubnetOne,
}

var EcsSecurityGroupIngressFromPublicALB = ec2.SecurityGroupIngress{
	Description: "Ingress from the public ALB",
	GroupId: EcsHostSecurityGroup,
	IpProtocol: -1,
	SourceSecurityGroupId: PublicLoadBalancerSG,
}

var PublicLoadBalancerLoadBalancerAttributeIdletimeouttimeoutse = elasticloadbalancingv2.LoadBalancer_LoadBalancerAttribute{
	Key: "idle_timeout.timeout_seconds",
	Value: "30",
}

var PublicLoadBalancer = elasticloadbalancingv2.LoadBalancer{
	LoadBalancerAttributes: []any{PublicLoadBalancerLoadBalancerAttributeIdletimeouttimeoutse},
	Scheme: "internet-facing",
	SecurityGroups: []any{PublicLoadBalancerSG},
	Subnets: []any{PublicSubnetOne, PublicSubnetTwo},
}

var PrivateLoadBalancerListenerDefaultActionForward = elasticloadbalancingv2.Listener_Action{
	TargetGroupArn: DummyTargetGroupPrivate,
	Type_: "forward",
}

var PrivateLoadBalancerListener = elasticloadbalancingv2.Listener{
	DefaultActions: []any{PrivateLoadBalancerListenerDefaultActionForward},
	LoadBalancerArn: PrivateLoadBalancer,
	Port: 80,
	Protocol: enums.Elbv2ProtocolEnumHttp,
}

var NatGatewayTwo = ec2.NatGateway{
	AllocationId: NatGatewayTwoAttachment.AllocationId,
	SubnetId: PublicSubnetTwo,
}

var PrivateRouteTableOneAssociation = ec2.SubnetRouteTableAssociation{
	RouteTableId: PrivateRouteTableOne,
	SubnetId: PrivateSubnetOne,
}

var PrivateRouteTwo = ec2.Route{
	DestinationCidrBlock: "0.0.0.0/0",
	NatGatewayId: NatGatewayTwo,
	RouteTableId: PrivateRouteTableTwo,
}

var PublicSubnetOne = ec2.Subnet{
	AvailabilityZone: Select{Index: 0, List: GetAZs{}},
	CidrBlock: FindInMap{"SubnetConfig", "PublicOne", "CIDR"},
	MapPublicIpOnLaunch: true,
	VpcId: VPC,
}

var PublicSubnetTwoRouteTableAssociation = ec2.SubnetRouteTableAssociation{
	RouteTableId: PublicRouteTable,
	SubnetId: PublicSubnetTwo,
}

var EcsSecurityGroupIngressFromPrivateALB = ec2.SecurityGroupIngress{
	Description: "Ingress from the private ALB",
	GroupId: EcsHostSecurityGroup,
	IpProtocol: -1,
	SourceSecurityGroupId: PrivateLoadBalancerSG,
}

var PublicSubnetTwo = ec2.Subnet{
	AvailabilityZone: Select{Index: 1, List: GetAZs{}},
	CidrBlock: FindInMap{"SubnetConfig", "PublicTwo", "CIDR"},
	MapPublicIpOnLaunch: true,
	VpcId: VPC,
}

var PublicLoadBalancerListenerDefaultActionForward = elasticloadbalancingv2.Listener_Action{
	TargetGroupArn: DummyTargetGroupPublic,
	Type_: "forward",
}

var PublicLoadBalancerListener = elasticloadbalancingv2.Listener{
	DefaultActions: []any{PublicLoadBalancerListenerDefaultActionForward},
	LoadBalancerArn: PublicLoadBalancer,
	Port: 80,
	Protocol: enums.Elbv2ProtocolEnumHttp,
}

var EcsSecurityGroupIngressFromSelf = ec2.SecurityGroupIngress{
	Description: "Ingress from other containers in the same security group",
	GroupId: EcsHostSecurityGroup,
	IpProtocol: -1,
	SourceSecurityGroupId: EcsHostSecurityGroup,
}

var PrivateRouteTableTwoAssociation = ec2.SubnetRouteTableAssociation{
	RouteTableId: PrivateRouteTableTwo,
	SubnetId: PrivateSubnetTwo,
}

var NatGatewayOne = ec2.NatGateway{
	AllocationId: NatGatewayOneAttachment.AllocationId,
	SubnetId: PublicSubnetOne,
}

var PrivateLoadBalancerIngressFromECS = ec2.SecurityGroupIngress{
	Description: "Only accept traffic from a container in the container host security group",
	GroupId: PrivateLoadBalancerSG,
	IpProtocol: -1,
	SourceSecurityGroupId: EcsHostSecurityGroup,
}
