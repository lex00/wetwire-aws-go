// Package webapp contains CloudFormation resources.
// Security resources: IAM, Cognito, KMS, etc.
//
// Generated by wetwire-aws import.
package webapp

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/cognito"
	"github.com/lex00/wetwire-aws-go/resources/iam"
	"github.com/lex00/wetwire-aws-go/resources/wafv2"
)

var CognitoUserPoolSchemaFamilyname = cognito.UserPool_SchemaAttribute{
	Name: "family_name",
	Required: true,
}

var CognitoUserPoolSchemaGivenname = cognito.UserPool_SchemaAttribute{
	Name: "given_name",
	Required: true,
}

var CognitoUserPoolSchemaEmail = cognito.UserPool_SchemaAttribute{
	Name: "email",
	Required: true,
}

var CognitoUserPoolAdminCreateUserConfig = cognito.UserPool_AdminCreateUserConfig{
	AllowAdminCreateUserOnly: true,
}

var CognitoUserPool = cognito.UserPool{
	AdminCreateUserConfig: CognitoUserPoolAdminCreateUserConfig,
	AutoVerifiedAttributes: []any{"email"},
	Schema: []any{CognitoUserPoolSchemaEmail, CognitoUserPoolSchemaGivenname, CognitoUserPoolSchemaFamilyname},
	UserPoolName: AppName,
}

var CognitoDomain = cognito.UserPoolDomain{
	Domain: AppName,
	UserPoolId: CognitoUserPool,
}

var JwtResourceHandlerRoleAssumeRolePolicyDocument = PolicyDocument{
	Statement: []any{JwtResourceHandlerRoleAssumeRolePolicyDocumentStatement0},
	Version: "2012-10-17",
}

var JwtResourceHandlerRoleAssumeRolePolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"sts:AssumeRole"},
	Effect: "Allow",
	Principal: ServicePrincipal{"lambda.amazonaws.com"},
}

var JwtResourceHandlerRole = iam.Role{
	AssumeRolePolicyDocument: JwtResourceHandlerRoleAssumeRolePolicyDocument,
	ManagedPolicyArns: []any{"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"},
}

var SiteCloudFrontLogsReplicationRoleAssumeRolePolicyDocument = PolicyDocument{
	Statement: []any{SiteCloudFrontLogsReplicationRoleAssumeRolePolicyDocumentStatement0},
	Version: "2012-10-17",
}

var SiteCloudFrontLogsReplicationRoleAssumeRolePolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"sts:AssumeRole"},
	Effect: "Allow",
	Principal: ServicePrincipal{"s3.amazonaws.com"},
}

var SiteCloudFrontLogsReplicationRole = iam.Role{
	AssumeRolePolicyDocument: SiteCloudFrontLogsReplicationRoleAssumeRolePolicyDocument,
	Path: "/",
}

var SiteCloudFrontLogsReplicationPolicyPolicyDocument = PolicyDocument{
	Statement: []any{SiteCloudFrontLogsReplicationPolicyPolicyDocumentStatement0, SiteCloudFrontLogsReplicationPolicyPolicyDocumentStatement1, SiteCloudFrontLogsReplicationPolicyPolicyDocumentStatement2},
	Version: "2012-10-17",
}

var SiteCloudFrontLogsReplicationPolicyPolicyDocumentStatement2 = PolicyStatement{
	Action: []any{"s3:ReplicateObject", "s3:ReplicateDelete", "s3:ReplicationTags"},
	Effect: "Allow",
	Resource: Sub{String: "arn:${AWS::Partition}:s3:::${AppName}-cflogs-replicas-${AWS::Region}-${AWS::AccountId}/*"},
}

var SiteCloudFrontLogsReplicationPolicyPolicyDocumentStatement1 = PolicyStatement{
	Action: []any{"s3:GetObjectVersionForReplication", "s3:GetObjectVersionAcl", "s3:GetObjectVersionTagging"},
	Effect: "Allow",
	Resource: Sub{String: "arn:${AWS::Partition}:s3:::${AppName}-cflogs-${AWS::Region}-${AWS::AccountId}/*"},
}

var SiteCloudFrontLogsReplicationPolicyPolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"s3:GetReplicationConfiguration", "s3:ListBucket"},
	Effect: "Allow",
	Resource: Sub{String: "arn:${AWS::Partition}:s3:::${AppName}-cflogs-${AWS::Region}-${AWS::AccountId}"},
}

var SiteCloudFrontLogsReplicationPolicy = iam.RolePolicy{
	PolicyDocument: SiteCloudFrontLogsReplicationPolicyPolicyDocument,
	PolicyName: "bucket-replication-policy",
	RoleName: SiteCloudFrontLogsReplicationRole,
}

var SiteContentReplicationRoleAssumeRolePolicyDocument = PolicyDocument{
	Statement: []any{SiteContentReplicationRoleAssumeRolePolicyDocumentStatement0},
	Version: "2012-10-17",
}

var SiteContentReplicationRoleAssumeRolePolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"sts:AssumeRole"},
	Effect: "Allow",
	Principal: ServicePrincipal{"s3.amazonaws.com"},
}

var SiteContentReplicationRole = iam.Role{
	AssumeRolePolicyDocument: SiteContentReplicationRoleAssumeRolePolicyDocument,
	Path: "/",
}

var SiteContentReplicationPolicyPolicyDocument = PolicyDocument{
	Statement: []any{SiteContentReplicationPolicyPolicyDocumentStatement0, SiteContentReplicationPolicyPolicyDocumentStatement1, SiteContentReplicationPolicyPolicyDocumentStatement2},
	Version: "2012-10-17",
}

var SiteContentReplicationPolicyPolicyDocumentStatement2 = PolicyStatement{
	Action: []any{"s3:ReplicateObject", "s3:ReplicateDelete", "s3:ReplicationTags"},
	Effect: "Allow",
	Resource: Sub{String: "arn:${AWS::Partition}:s3:::${AppName}-content-replicas-${AWS::Region}-${AWS::AccountId}/*"},
}

var SiteContentReplicationPolicyPolicyDocumentStatement1 = PolicyStatement{
	Action: []any{"s3:GetObjectVersionForReplication", "s3:GetObjectVersionAcl", "s3:GetObjectVersionTagging"},
	Effect: "Allow",
	Resource: Sub{String: "arn:${AWS::Partition}:s3:::${AppName}-content-${AWS::Region}-${AWS::AccountId}/*"},
}

var SiteContentReplicationPolicyPolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"s3:GetReplicationConfiguration", "s3:ListBucket"},
	Effect: "Allow",
	Resource: Sub{String: "arn:${AWS::Partition}:s3:::${AppName}-content-${AWS::Region}-${AWS::AccountId}"},
}

var SiteContentReplicationPolicy = iam.RolePolicy{
	PolicyDocument: SiteContentReplicationPolicyPolicyDocument,
	PolicyName: "bucket-replication-policy",
	RoleName: SiteContentReplicationRole,
}

var SiteWebACLRuleAWSNegAWSManagedRuleStatementManagedRuleGroupStatementExcludedRuleNoUserAgentHEADER = wafv2.WebACL_ExcludedRule{
	Name: "NoUserAgent_HEADER",
}

var SiteWebACLRuleAWSNegAWSManagedRuleStatementManagedRuleGroupStatement = wafv2.WebACL_ManagedRuleGroupStatement{
	ExcludedRules: []any{SiteWebACLRuleAWSNegAWSManagedRuleStatementManagedRuleGroupStatementExcludedRuleNoUserAgentHEADER},
	Name: "AWSManagedRulesCommonRuleSet",
	VendorName: "AWS",
}

var SiteWebACLRuleAWSNegAWSManagedRuleVisibilityConfig = wafv2.RuleGroup_VisibilityConfig{
	CloudWatchMetricsEnabled: true,
	MetricName: "MetricForAMRCRS",
	SampledRequestsEnabled: true,
}

var SiteWebACLRuleAWSNegAWSManagedRuleStatement = wafv2.WebACL_Statement{
	ManagedRuleGroupStatement: SiteWebACLRuleAWSNegAWSManagedRuleStatementManagedRuleGroupStatement,
}

var SiteWebACLRuleAWSNegAWSManagedRuleOverrideAction = wafv2.WebACL_OverrideAction{
	None: Json{},
}

var SiteWebACLDefaultActionAllow = wafv2.RuleGroup_AllowAction{
}

var SiteWebACLVisibilityConfig = wafv2.WebACL_VisibilityConfig{
	CloudWatchMetricsEnabled: true,
	MetricName: "MetricForWebACLWithAMR",
	SampledRequestsEnabled: true,
}

var SiteWebACLTagName = Tag{
	Key: "Name",
	Value: AppName,
}

var SiteWebACLRuleAWSNegAWSManagedRule = wafv2.WebACL_Rule{
	Name: "AWS-AWSManagedRulesCommonRuleSet",
	OverrideAction: SiteWebACLRuleAWSNegAWSManagedRuleOverrideAction,
	Priority: 0,
	Statement: SiteWebACLRuleAWSNegAWSManagedRuleStatement,
	VisibilityConfig: SiteWebACLRuleAWSNegAWSManagedRuleVisibilityConfig,
}

var SiteWebACLDefaultAction = wafv2.WebACL_DefaultAction{
	Allow: SiteWebACLDefaultActionAllow,
}

var SiteWebACL = wafv2.WebACL{
	DefaultAction: SiteWebACLDefaultAction,
	Description: "Web ACL with AWS Managed Rules",
	Name: Sub{String: "${AppName}-WebACLWithAMR"},
	Rules: []any{SiteWebACLRuleAWSNegAWSManagedRule},
	Scope: "CLOUDFRONT",
	Tags: []any{SiteWebACLTagName},
	VisibilityConfig: SiteWebACLVisibilityConfig,
}

var CognitoClient = cognito.UserPoolClient{
	AllowedOAuthFlows: []any{"code"},
	AllowedOAuthFlowsUserPoolClient: true,
	AllowedOAuthScopes: []any{"phone", "email", "openid"},
	CallbackURLs: []any{Sub{String: "https://${SiteDistribution.DomainName}/index.html"}},
	ClientName: AppName,
	GenerateSecret: false,
	SupportedIdentityProviders: []any{"COGNITO"},
	UserPoolId: CognitoUserPool,
}

var TestResourceHandlerRoleAssumeRolePolicyDocument = PolicyDocument{
	Statement: []any{TestResourceHandlerRoleAssumeRolePolicyDocumentStatement0},
	Version: "2012-10-17",
}

var TestResourceHandlerRoleAssumeRolePolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"sts:AssumeRole"},
	Effect: "Allow",
	Principal: ServicePrincipal{"lambda.amazonaws.com"},
}

var TestResourceHandlerRole = iam.Role{
	AssumeRolePolicyDocument: TestResourceHandlerRoleAssumeRolePolicyDocument,
	ManagedPolicyArns: []any{"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"},
}

var TestResourceHandlerPolicyPolicyDocument = PolicyDocument{
	Statement: []any{TestResourceHandlerPolicyPolicyDocumentStatement0},
	Version: "2012-10-17",
}

var TestResourceHandlerPolicyPolicyDocumentStatement0 = PolicyStatement{
	Action: []any{"dynamodb:BatchGetItem", "dynamodb:GetItem", "dynamodb:Query", "dynamodb:Scan", "dynamodb:BatchWriteItem", "dynamodb:PutItem", "dynamodb:UpdateItem"},
	Effect: "Allow",
	Resource: []any{TestTable.Arn},
}

var TestResourceHandlerPolicy = iam.RolePolicy{
	PolicyDocument: TestResourceHandlerPolicyPolicyDocument,
	PolicyName: "handler-policy",
	RoleName: TestResourceHandlerRole,
}
