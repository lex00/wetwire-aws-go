// Package autoscalingrollingupdates contains CloudFormation resources.
// Compute resources: EC2, Lambda, ECS, etc.
//
// Generated by wetwire-aws import.
package autoscalingrollingupdates

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/autoscaling"
)

var LaunchConfig = autoscaling.LaunchConfiguration{
	IamInstanceProfile: WebServerInstanceProfile,
	ImageId: FindInMap{"AWSRegionArch2AMI", AWS_REGION, FindInMap{"AWSInstanceType2Arch", InstanceType, "Arch"}},
	InstanceType: InstanceType,
	KeyName: KeyName,
	SecurityGroups: Any(InstanceSecurityGroup),
	UserData: Base64{Sub{String: "#!/bin/bash -xe\nyum install -y aws-cfn-bootstrap\n/opt/aws/bin/cfn-init -v --stack ${AWS::StackId} --resource LaunchConfig --configsets full_install --region ${AWS::Region}\n/opt/aws/bin/cfn-signal -e $? --stack ${AWS::StackId} --resource WebServerGroup --region ${AWS::Region}\n"}},
}

var WebServerGroup = autoscaling.AutoScalingGroup{
	AvailabilityZones: GetAZs{},
	LaunchConfigurationName: LaunchConfig,
	LoadBalancerNames: Any(ElasticLoadBalancer),
	MaxSize: 4,
	MinSize: 2,
}
