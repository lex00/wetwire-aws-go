// Package vpcpeering_accepter_tag_cfn contains CloudFormation resources.
// Compute resources: EC2, Lambda, ECS, etc.
//
// Generated by wetwire-aws import.
package vpcpeering_accepter_tag_cfn

import (
	"github.com/lex00/cloudformation-schema-go/enums"
	"github.com/lex00/wetwire-aws-go/resources/lambda"
)

var TagVpcPeeringConnectionsLambdaFunctionEnvironment = &lambda.Function_Environment{
	Variables: map[string]any{"LOG_LEVEL": LambdaLogLevel},
}

var TagVpcPeeringConnectionsLambdaFunctionCode = lambda.Function_Code{
	ZipFile: "import cfnresponse, json, os, logging, boto3\n\nLOGGER = logging.getLogger()\nLOGGER.setLevel(logging.INFO)\n\ntry:\n  logging.getLogger(\"boto3\").setLevel(logging.CRITICAL)\n\n  # Process Environment Variables\n  LOGGER.setLevel(os.environ.get(\"LOG_LEVEL\", logging.ERROR))\n\n  ec2_client = boto3.client(\"ec2\")\nexcept Exception as error:\n  LOGGER.error(error)\n  cfnresponse.send(event, context, cfnresponse.FAILED, {})\n  raise\n\n\ndef apply_name_tag(resource, name):\n  return ec2_client.create_tags(Resources=[resource], Tags=[{\"Key\": \"Name\", \"Value\": name}])\n\n\ndef delete_name_tag(resource):\n  return ec2_client.delete_tags(Resources=[resource], Tags=[{\"Key\": \"Name\"}])\n\n\ndef handler(event, context):\n  try:\n    LOGGER.info(f\"REQUEST RECEIVED: {json.dumps(event, default=str)}\")\n    response_data = {}\n    physical_resource_id = event.get(\"PhysicalResourceId\")\n    resource = event[\"ResourceProperties\"].get(\"Resource\")\n    name = event[\"ResourceProperties\"].get(\"Name\")\n\n    if event.get(\"RequestType\") in [\"Create\", \"Update\"]:\n      response = apply_name_tag(resource, name)\n      LOGGER.info(f\"response = {json.dumps(response, default=str)}\")\n    if event.get(\"RequestType\") == \"Delete\":\n      response = delete_name_tag(resource)\n      LOGGER.info(f\"response = {json.dumps(response, default=str)}\")\n\n    LOGGER.info(\"Sending Custom Resource Response\")\n    cfnresponse.send(event, context, cfnresponse.SUCCESS, response_data, physical_resource_id)\n    return\n  except Exception as error:\n    LOGGER.error(error)\n    cfnresponse.send(event, context, cfnresponse.FAILED, {})\n    return\n",
}

var TagVpcPeeringConnectionsLambdaFunction = lambda.Function{
	Code: TagVpcPeeringConnectionsLambdaFunctionCode,
	Environment: TagVpcPeeringConnectionsLambdaFunctionEnvironment,
	FunctionName: LambdaFunctionName,
	Handler: "index.handler",
	MemorySize: 128,
	Role: TagVpcPeeringConnectionsLambdaRole.Arn,
	Runtime: enums.LambdaRuntimePython312,
	Timeout: 120,
}
