// Package public_service contains CloudFormation resources.
// Compute resources: EC2, Lambda, ECS, etc.
//
// Generated by wetwire-aws import.
package public_service

import (
	. "github.com/lex00/wetwire-aws-go/intrinsics"
	"github.com/lex00/wetwire-aws-go/resources/ecs"
)

var TaskDefinitionContainerDefinition1PortMapping1 = ecs.TaskDefinition_PortMapping{
	ContainerPort: ContainerPort,
}

var TaskDefinitionContainerDefinition1 = ecs.TaskDefinition_ContainerDefinition{
	Cpu: ContainerCpu,
	Essential: true,
	Image: ImageUrl,
	Memory: ContainerMemory,
	Name: ServiceName,
	PortMappings: []any{TaskDefinitionContainerDefinition1PortMapping1},
}

var TaskDefinition = ecs.TaskDefinition{
	ContainerDefinitions: []any{TaskDefinitionContainerDefinition1},
	Cpu: ContainerCpu,
	Family: ServiceName,
	Memory: ContainerMemory,
	TaskRoleArn: If{"HasCustomRole", Role, AWS_NO_VALUE},
}

var ServiceLoadBalancer1 = ecs.Service_LoadBalancer{
	ContainerName: ServiceName,
	ContainerPort: ContainerPort,
	TargetGroupArn: TargetGroup,
}

var ServiceDeploymentConfiguration = ecs.Service_DeploymentConfiguration{
	MaximumPercent: 200,
	MinimumHealthyPercent: 75,
}

var Service = ecs.Service{
	Cluster: ImportValue{Join{Delimiter: ":", Values: []any{
	StackName,
	"ClusterName",
}}},
	DeploymentConfiguration: ServiceDeploymentConfiguration,
	DesiredCount: DesiredCount,
	LoadBalancers: []any{ServiceLoadBalancer1},
	ServiceName: ServiceName,
	TaskDefinition: TaskDefinition,
}
